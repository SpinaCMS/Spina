<%= render Spina::UserInterface::ModalComponent.new do %>
  <%= form_with url: spina.admin_embeddables_path do |f| %>
    
    <% @embeddables.each do |embeddable| %>
      <%= render partial: embeddable.to_fields_path, locals: {f: f} %>
    <% end %>
    
    <%= f.submit %>
  <% end %>
  
  <div data-controller="embeddables" data-trix-target="<%= params[:target] %>">
    <%= turbo_frame_tag :embeddable_html, class: '', data: {embeddables_target: "html"} do %>
    <% end %>
    <button type="button" data-action="embeddables#embed">
      Embed
    </button>
  </div>
<% end %>