<turbo-frame id="page_content">
  <%= fields_for(@page) do |f| %>
    <% f.fields_for "#{@locale}_content".to_sym, build_parts(f.object, @parts) do |ff| %>
      <%= ff.hidden_field :type, value: ff.object.class %>
      <%= ff.hidden_field :name %>
      <%= ff.hidden_field :title %>
  
      <%= render "spina/admin/parts/#{parts_partial_namespace(ff.object.class.to_s)}/form", f: ff %>
    <% end %>
  <% end %>
  
  <%= fields_for(@page) do |f| %>
    <% @sections.each do |section| %>
      <div class="mt-10">
        <div class="border-b border-gray-200 mb-4 pb-1">
          <div class="text-xl font-medium"><%= section[:title] %></div>
          <div class="text-sm text-gray-400"><%= section[:description] %></div>
        </div>
        
        <div class="space-y-6">
          <%= f.fields_for "#{@locale}_content".to_sym, build_parts(f.object, section[:parts]) do |ff| %>
            <div>
              <%= ff.hidden_field :type, value: ff.object.class %>
              <%= ff.hidden_field :name %>
              <%= ff.hidden_field :title %>
            
              <%= render "spina/admin/parts/#{parts_partial_namespace(ff.object.class.to_s)}/form", f: ff %>
            </div>
          <% end %>
        </div>
      </div>
    <% end %>
  <% end %>
</turbo-frame>